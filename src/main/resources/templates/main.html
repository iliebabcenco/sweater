<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../static/style.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Main</title>
</head>
    <body>
    <div th:replace="fragments/navbar :: header">&nbsp;</div>
        <div>
            <h1 th:inline="text">Hello [[${#httpServletRequest.remoteUser}]]!</h1>


            <form th:action="@{/main}" th:method="post" enctype="multipart/form-data">
                <input type="text" name="text" id="text" placeholder="Enter message: ">
                <input type="text" name="tag" placeholder="tag">
                <input type="file" name="file">
                <button type="submit">Add message</button>
            </form>
            <form th:action="@{/main}" th:method="get" th:object="${filter}">

                <input type="text" name="filter">
                <button type="submit">Search</button>
            </form>
        </div>
        <h3>List of messages: </h3>
        <div >
            <table>
                <thead>
                    <tr>
                        <td>ID</td>
                        <td>Text</td>
                        <td>Tag</td>
                        <td>Author</td>
                        <td>Img</td>
                    </tr>
                </thead>
                <tbody th:each="message : ${messages}">
                    <tr>
                        <td th:text="${message.getId()}"></td>
                        <td th:text="${message.getText()}"></td>
                        <td th:text="${message.getTag()}"></td>
                        <td th:text="${message.getAuthorName()}"></td>
                        <td th:if="${message.getFileName() != null}">
                            <img th:src="@{/img/{filename}(filename = ${message.getFileName()})}" alt="image">
                        </td>
                    </tr>
                </tbody>

            </table>
        </div>
    </body>
</html>